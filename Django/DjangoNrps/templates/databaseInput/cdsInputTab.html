<div class="progress progress-warning progress-striped active">
    <div class="bar" style="width: 36%"></div>
    <span>Hmm calculated!</span>
</div>



        {{ form.non_field_errors }}
        <form id="cdsFormForDomainPrediction">
        <div class="row">
          <div class="span3">
                   <div class="fieldWrapper">
            {{ form.origin.errors }}
            <label for="id_subject"></label>
            <div id="originChosenWrapper" class = "chosenWrapper">
              {{ form.origin }} <br/>
            </div>
            </div>
            <div class="fieldWrapper">
              {{ form.dnaSequence.errors }}
              <label for="id_dnaSequence">Please enter DNA sequence: <br/> </label>
              {{ form.dnaSequence }} <br/>
              <div class="btn-group">
                <input type="button" class="btn" onclick="predictDomains()" value="Generate Domains!"/>

              </div>

            </div>
          </div>

          <div class="span3">
<a href="{% url 'addOrigin' %}" role="button" class="btn btn-link" data-toggle="modal"  data-target="#myModal">   Or add new Origin</a>

<div class="modal hide fade"  id="myModal"></div>



            <div class="fieldWrapper">
              {{ form.geneName.errors }}
              <label for="id_message">Gene Name:<br/> </label>
              {{ form.geneName }}
            </div>
            <div class="fieldWrapper">
              {{ form.description.errors }}
              <label for="id_sender">Description:<br/> </label>
              {{ form.description }}
            </div>
          </div>
        </div>
        </form>


<script type="text/javascript">
// code from http://blog.assimov.net/blog/2012/03/09/ajax-content-in-twitter-bootstrap-modal/ 
// adapted from coffeescript to javascript
// enables use of Bootstrap modal to load other html pages


    jQuery("a[data-toggle=modal]").click(function() {
  var target, url;
  target = jQuery(this).attr('data-target');
  url = jQuery(this).attr('href');
  return jQuery(target).load(url);
});

	predictDomains = function(){
    jQuery("#tabs").tabs("disable",1);
		jQuery.post("{% url "getDomainForm" %}", jQuery("#cdsFormForDomainPrediction").serialize(), function(data){
      if (data[0] === AJAX_ERROR){
        jQuery("#cdsInputTab").html(data[1].html);
      } else {
			 jQuery("#domainInput").html( data[1].html);

              jQuery( "#accordion" ).accordion({
                heightStyle: "content",
                collapsible: true
              });
			 jQuery("#tabs").tabs("enable",1);
      }

		});
		
	};




        jQuery(document).ready(function() {
          jQuery('#originChosenWrapper > select > option').filter(':first').html('');
          jQuery('#originChosenWrapper').children().select2({placeholder: "Choose existing"});

          jQuery("#cdsFormForDomainPrediction").change(function() {
            jQuery("#tabs").tabs("disable",1);})

        });



    // function activateTabs(data){
    //     console.log(data);
    //     data = jQuery.parseJSON(data);
    //     constructId =  data["constructId"];
    //     if (constructId != 0) {
    //    jQuery("#tabs").tabs("enable",1);
  
    //     } else {
    //         alert("ERROR");
    //     }
    // }

</script>