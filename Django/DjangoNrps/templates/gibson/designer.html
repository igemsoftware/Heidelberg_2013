{% extends "base.html" %}

{% block css-include %}
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}/css/designer.css" />
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}/css/primers.css" />
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}/css/formtools.css"/>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}/css/jFragment.css" />
{% endblock %}

{% block js-include %}
<script src="{{ STATIC_URL }}/js/formtools.js" type="text/javascript"></script>

<script src="http://code.createjs.com/easeljs-0.4.2.min.js"></script>
<script src="http://code.createjs.com/tweenjs-0.2.0.min.js"></script>

<script src="{{ STATIC_URL }}/js/libfrag.js" type="text/javascript"></script>
<script src="{{ STATIC_URL }}/js/libdesigner.js" type="text/javascript"></script>
<script src="{{ STATIC_URL }}/js/designer.js" type="text/javascript"></script>
<script src="{{ STATIC_URL }}/js/ajax.js" type="text/javascript"></script>

<script>
   jQuery.noConflict();
</script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/prototype/1.7.0.0/prototype.js"></script>
      <!-- in order to standardize the look of text, and in order to make it work at
           all in older browsers (and IE), we need the canvas text library. And, in turn,
           that library uses a font description in a separate javascript file -->
           <script type="text/javascript" src="http://pfam.sanger.ac.uk/static/javascripts/canvas.text.js?dontUseMoz=true&amp;reimplement=true"></script>
           <script type="text/javascript" src="http://pfam.sanger.ac.uk/static/javascripts/faces/optimer-bold-normal.js"></script>

      <!-- we use the (non-free) prototip2 library to add tooltips. It's not free, but
           nearly. The domain graphics code should cope if it's not loaded, so you
           could just omit the prototip load -->
           <script type="text/javascript" src="http://pfam.sanger.ac.uk/shared/javascripts/prototip.js"></script>
           <script type="text/javascript" src="http://pfam.sanger.ac.uk/shared/javascripts/styles.js"></script>
{% endblock %}


{% block content %}
<div>
	
	<div class="content center full-width">
		<div id='tabs' class='left'>
			<ul>

		
				<li>
					<a href="{% url 'guiTool' nrp.pk %}" class='tab-link'>
						<span class='ui-icon ui-icon-transferthick-e-w tab-icon'></span>
						NRP
					</a>
					</li>
						<li>

					<a id="domainSequence"
					{% if nrp.construct %}
					href="{% url 'domainSequence' pid=nrp.pk %}"
					{% else %}
					href = ""
					{% endif %}
					class='tab-link'>
						<span class='ui-icon ui-icon-pencil tab-icon'></span>
						Designer
					</a>
				</li>
				</li>
						<li>

					<a id="constructTab"
					{% if nrp.construct %}
					href="{% url 'design_tab' cid=nrp.construct.pk %}"
					{% else %}
					href = ""
					{% endif %}
					class='tab-link'>
						<span class='ui-icon ui-icon-pencil tab-icon'></span>
						Designer
					</a>
				</li>

				<li>
					<a id="primerTab"
						{% if nrp.construct %}
					href="{% url 'primers' cid=nrp.construct.pk %}"
						{% else %}
					href = ""
						{% endif %}
					class = 'tab-link'>
						<span class='ui-icon ui-icon-transferthick-e-w tab-icon'></span>
						Primers
					</a>
				</li>
	
			</ul>
            
		</div>
	</div>
</div>
{% endblock %}

{% block dialog %}
<div id='confirm_delete' style='display:none'>
	<div id='delete_contents'>
		<div style="text-align:center;margin-top:1.5em;">
			<p>Are you sure you want to delete this construct?</p>
		<div>
		<div>
			<button id="cancel-delete">Cancel</button>
			<button id="confirm-delete">Delete</button>
		</div>
	</div>
</div>

<div id='primer_dlg' style='display:none'></div>


{% endblock %}

{% block js %}
<script type='text/javascript'>



	jQuery(window).ready( function($) {
		//tabs
		$( "#tabs" ).tabs({
			beforeLoad: function( event, ui ) {
			    if ( (ui.tab.index() == 2 || ui.tab.index() ==0) && ui.tab.data( "loaded" ) ) {
			      event.preventDefault();
			      return;
			    }

			    ui.jqXHR.success(function() {
			      ui.tab.data( "loaded", true );
		    });}, 
			ajaxOptions: {
				error: function( xhr, status, index, anchor ) {
					$( anchor.hash ).html(
						"<p>ERROR: Failed to load this tab, status: " + status + " </p>");
				}
			},

			{% if not nrp.construct %}
			disabled: [ 1, 2 ,3],
			{% endif %}


			//make sure to include a comma between the ajaxoptions, and the load options
    		//this is the bit that makes all a link with the class of 'thisPane' stay within the tab
    		//a href tags that are not of the class 'thisPane' will open outside the tab
    load: function(event, ui) {
    $(ui.panel).delegate('a.thisPane', 'click', function(event) {
        $(ui.panel).load(this.href);
        event.preventDefault();
    });
    }
		});
		

	
	});



</script>
{% endblock %}
